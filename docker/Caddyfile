# Homeport Caddyfile
# Routes traffic to homeportd and code-server
#
# When using Cloudflare Tunnel, Caddy handles local routing only.
# Cloudflare handles TLS termination.

{
	# Disable HTTPS since Cloudflare Tunnel handles TLS
	auto_https off

	# Admin endpoint (optional, for debugging)
	admin off
}

# Main site
:80 {
	# Logging
	log {
		output stdout
		format console
	}

	# Everything goes through homeportd for auth
	# homeportd handles proxying to code-server at /code/*
	reverse_proxy localhost:8080
}
